{"changed":true,"filter":false,"title":"payment.html","tooltip":"/index/views/payment.html","value":"","undoManager":{"mark":11,"position":26,"stack":[[{"start":{"row":0,"column":0},"end":{"row":50,"column":0},"action":"insert","lines":["<head>","  <meta charset=\"utf-8\">","","<script src=\"http://code.jquery.com/jquery-3.2.1.min.js\" crossorigin=\"anonymous\"></script>","  <script src=\"https://js.braintreegateway.com/web/dropin/1.20.4/js/dropin.min.js\"></script>","</head>","<div id=\"dropin-wrapper\">","  <div id=\"checkout-message\"></div>","  <div id=\"dropin-container\"></div>","  <button id=\"submit-button\">Submit payment</button>","</div>","<script>","  var button = document.querySelector('#submit-button');","","  braintree.dropin.create({","    // Insert your tokenization key here","    authorization: 'sandbox_9qhy79sn_6jrxkpgfjyqz9zmd',","    container: '#dropin-container'","  }, function (createErr, instance) {","    button.addEventListener('click', function () {","      instance.requestPaymentMethod(function (requestPaymentMethodErr, payload) {","        // When the user clicks on the 'Submit payment' button this code will send the","        // encrypted payment information in a variable called a payment method nonce","        $.ajax({","          type: 'POST',","          url: '/payment',","          data: {'paymentMethodNonce': payload.nonce}","        }).done(function(result) {","          // Tear down the Drop-in UI","          instance.teardown(function (teardownErr) {","            if (teardownErr) {","              console.error('Could not tear down Drop-in UI!');","            } else {","              console.info('Drop-in UI has been torn down!');","              // Remove the 'Submit payment' button","              $('#submit-button').remove();","            }","          });","","          if (result.success) {","            $('#checkout-message').html('<h1>Success</h1><p> Check your <a href=\"https://sandbox.braintreegateway.com/login\">sandbox Control Panel</a> for your test transactions.</p><p>Refresh to try another transaction.</p>');","          } else {","            console.log(result);","            $('#checkout-message').html('<h1>Error</h1><p>Payment not accepted</p>');","          }","        });","      });","    });","  });","</script>",""],"id":1}],[{"start":{"row":16,"column":20},"end":{"row":16,"column":53},"action":"remove","lines":["sandbox_9qhy79sn_6jrxkpgfjyqz9zmd"],"id":2},{"start":{"row":16,"column":20},"end":{"row":16,"column":53},"action":"insert","lines":["sandbox_9qkg4msj_4k6xdcnwmnf8zsdk"]}],[{"start":{"row":4,"column":1},"end":{"row":4,"column":92},"action":"remove","lines":[" <script src=\"https://js.braintreegateway.com/web/dropin/1.20.4/js/dropin.min.js\"></script>"],"id":8}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":91},"action":"insert","lines":[" <script src=\"https://js.braintreegateway.com/web/dropin/1.20.4/js/dropin.min.js\"></script>"],"id":9}],[{"start":{"row":0,"column":0},"end":{"row":5,"column":7},"action":"remove","lines":["<head>","  <meta charset=\"utf-8\">"," <script src=\"https://js.braintreegateway.com/web/dropin/1.20.4/js/dropin.min.js\"></script>","<script src=\"http://code.jquery.com/jquery-3.2.1.min.js\" crossorigin=\"anonymous\"></script>"," ","</head>"],"id":10},{"start":{"row":0,"column":0},"end":{"row":4,"column":90},"action":"insert","lines":["<!-- includes the Braintree JS client SDK -->","<script src=\"https://js.braintreegateway.com/web/dropin/1.20.4/js/dropin.min.js\"></script>","","<!-- includes jQuery -->","<script src=\"http://code.jquery.com/jquery-3.2.1.min.js\" crossorigin=\"anonymous\"></script>"]}],[{"start":{"row":0,"column":45},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"insert","lines":["<"]},{"start":{"row":1,"column":1},"end":{"row":1,"column":2},"action":"insert","lines":["h"]},{"start":{"row":1,"column":2},"end":{"row":1,"column":3},"action":"insert","lines":["e"]},{"start":{"row":1,"column":3},"end":{"row":1,"column":4},"action":"insert","lines":["a"]},{"start":{"row":1,"column":4},"end":{"row":1,"column":5},"action":"insert","lines":["d"]}],[{"start":{"row":1,"column":5},"end":{"row":1,"column":13},"action":"insert","lines":["></head>"],"id":12}],[{"start":{"row":1,"column":6},"end":{"row":1,"column":13},"action":"remove","lines":["</head>"],"id":13}],[{"start":{"row":5,"column":90},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":14}],[{"start":{"row":6,"column":0},"end":{"row":6,"column":7},"action":"insert","lines":["</head>"],"id":15}],[{"start":{"row":7,"column":0},"end":{"row":51,"column":0},"action":"remove","lines":["<div id=\"dropin-wrapper\">","  <div id=\"checkout-message\"></div>","  <div id=\"dropin-container\"></div>","  <button id=\"submit-button\">Submit payment</button>","</div>","<script>","  var button = document.querySelector('#submit-button');","","  braintree.dropin.create({","    // Insert your tokenization key here","    authorization: 'sandbox_9qkg4msj_4k6xdcnwmnf8zsdk',","    container: '#dropin-container'","  }, function (createErr, instance) {","    button.addEventListener('click', function () {","      instance.requestPaymentMethod(function (requestPaymentMethodErr, payload) {","        // When the user clicks on the 'Submit payment' button this code will send the","        // encrypted payment information in a variable called a payment method nonce","        $.ajax({","          type: 'POST',","          url: '/payment',","          data: {'paymentMethodNonce': payload.nonce}","        }).done(function(result) {","          // Tear down the Drop-in UI","          instance.teardown(function (teardownErr) {","            if (teardownErr) {","              console.error('Could not tear down Drop-in UI!');","            } else {","              console.info('Drop-in UI has been torn down!');","              // Remove the 'Submit payment' button","              $('#submit-button').remove();","            }","          });","","          if (result.success) {","            $('#checkout-message').html('<h1>Success</h1><p> Check your <a href=\"https://sandbox.braintreegateway.com/login\">sandbox Control Panel</a> for your test transactions.</p><p>Refresh to try another transaction.</p>');","          } else {","            console.log(result);","            $('#checkout-message').html('<h1>Error</h1><p>Payment not accepted</p>');","          }","        });","      });","    });","  });","</script>",""],"id":16},{"start":{"row":7,"column":0},"end":{"row":50,"column":9},"action":"insert","lines":["<div id=\"dropin-wrapper\">","  <div id=\"checkout-message\"></div>","  <div id=\"dropin-container\"></div>","  <button id=\"submit-button\">Submit payment</button>","</div>","<script>","  var button = document.querySelector('#submit-button');","","  braintree.dropin.create({","    // Insert your tokenization key here","    authorization: '<use_your_tokenization_key>',","    container: '#dropin-container'","  }, function (createErr, instance) {","    button.addEventListener('click', function () {","      instance.requestPaymentMethod(function (requestPaymentMethodErr, payload) {","        // When the user clicks on the 'Submit payment' button this code will send the","        // encrypted payment information in a variable called a payment method nonce","        $.ajax({","          type: 'POST',","          url: '/checkout',","          data: {'paymentMethodNonce': payload.nonce}","        }).done(function(result) {","          // Tear down the Drop-in UI","          instance.teardown(function (teardownErr) {","            if (teardownErr) {","              console.error('Could not tear down Drop-in UI!');","            } else {","              console.info('Drop-in UI has been torn down!');","              // Remove the 'Submit payment' button","              $('#submit-button').remove();","            }","          });","","          if (result.success) {","            $('#checkout-message').html('<h1>Success</h1><p>Your Drop-in UI is working! Check your <a href=\"https://sandbox.braintreegateway.com/login\">sandbox Control Panel</a> for your test transactions.</p><p>Refresh to try another transaction.</p>');","          } else {","            console.log(result);","            $('#checkout-message').html('<h1>Error</h1><p>Check your console.</p>');","          }","        });","      });","    });","  });","</script>"]}],[{"start":{"row":17,"column":20},"end":{"row":17,"column":47},"action":"remove","lines":["<use_your_tokenization_key>"],"id":17},{"start":{"row":17,"column":20},"end":{"row":17,"column":53},"action":"insert","lines":["sandbox_9qkg4msj_4k6xdcnwmnf8zsdk"]}],[{"start":{"row":19,"column":37},"end":{"row":20,"column":0},"action":"insert","lines":["",""],"id":18},{"start":{"row":20,"column":0},"end":{"row":20,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":20,"column":6},"end":{"row":20,"column":7},"action":"insert","lines":["i"],"id":19},{"start":{"row":20,"column":7},"end":{"row":20,"column":8},"action":"insert","lines":["f"]}],[{"start":{"row":20,"column":8},"end":{"row":20,"column":10},"action":"insert","lines":["()"],"id":20}],[{"start":{"row":20,"column":9},"end":{"row":20,"column":10},"action":"insert","lines":["r"],"id":21},{"start":{"row":20,"column":10},"end":{"row":20,"column":11},"action":"insert","lines":["e"]}],[{"start":{"row":20,"column":10},"end":{"row":20,"column":11},"action":"remove","lines":["e"],"id":22},{"start":{"row":20,"column":9},"end":{"row":20,"column":10},"action":"remove","lines":["r"]}],[{"start":{"row":20,"column":9},"end":{"row":20,"column":10},"action":"insert","lines":["c"],"id":23},{"start":{"row":20,"column":10},"end":{"row":20,"column":11},"action":"insert","lines":["r"]},{"start":{"row":20,"column":11},"end":{"row":20,"column":12},"action":"insert","lines":["e"]},{"start":{"row":20,"column":12},"end":{"row":20,"column":13},"action":"insert","lines":["a"]}],[{"start":{"row":20,"column":9},"end":{"row":20,"column":13},"action":"remove","lines":["crea"],"id":24},{"start":{"row":20,"column":9},"end":{"row":20,"column":18},"action":"insert","lines":["createErr"]}],[{"start":{"row":20,"column":19},"end":{"row":20,"column":20},"action":"insert","lines":["{"],"id":25}],[{"start":{"row":20,"column":19},"end":{"row":20,"column":20},"action":"remove","lines":["{"],"id":26}],[{"start":{"row":20,"column":19},"end":{"row":20,"column":20},"action":"insert","lines":["{"],"id":27},{"start":{"row":20,"column":20},"end":{"row":20,"column":21},"action":"insert","lines":["{"]}],[{"start":{"row":20,"column":20},"end":{"row":20,"column":21},"action":"remove","lines":["{"],"id":28}],[{"start":{"row":20,"column":20},"end":{"row":20,"column":21},"action":"insert","lines":["}"],"id":29}],[{"start":{"row":20,"column":20},"end":{"row":20,"column":21},"action":"insert","lines":["c"],"id":30},{"start":{"row":20,"column":21},"end":{"row":20,"column":22},"action":"insert","lines":["o"]}],[{"start":{"row":20,"column":21},"end":{"row":20,"column":22},"action":"remove","lines":["o"],"id":31},{"start":{"row":20,"column":20},"end":{"row":20,"column":21},"action":"remove","lines":["c"]}],[{"start":{"row":20,"column":20},"end":{"row":20,"column":21},"action":"insert","lines":["c"],"id":32},{"start":{"row":20,"column":21},"end":{"row":20,"column":22},"action":"insert","lines":["o"]}]]},"ace":{"folds":[],"scrolltop":176,"scrollleft":0,"selection":{"start":{"row":20,"column":22},"end":{"row":20,"column":22},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":9,"state":"start","mode":"ace/mode/html"}},"timestamp":1573333614723}